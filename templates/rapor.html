{% extends 'base.html' %} {% block body %}
<div class="flex justify-center">
  <h1 class="text-2xl font-semibold">Halaman Rapor</h1>
</div>
<div class="flex justify-center my-5">
  <form action="/raporsiswa/cari" method="POST">
    <div class="flex">
      <div>
        <input
          type="text"
          name="key"
          placeholder="Pencarian"
          title="Cari berdasarkan Nama dan NIS"
          class="rounded-l-lg border-2 border-blue-500 py-1 px-3 outline-none placeholder:transition-all placeholder:duration-300 focus:placeholder:text-transparent"
        />
      </div>
      <div>
        <button
          class="rounded-r-lg border-2 border-blue-500 bg-blue-500 py-1 px-3 text-white hover:border-blue-600 hover:bg-blue-600"
          title="Cari"
          type="submit"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
        </button>
      </div>
    </div>
  </form>
</div>
<div class="container">
  {% for row in data %}
  <div class="flex py-1 justify-center">
    <div
      class="relative border-2 w-full px-3 py-2 hover:bg-gray-100 transition-all duration-300"
    >
      <div
        data-row="row-rapor-{{ row.nis }}"
        class="row-rapor flex items-center cursor-pointer"
      >
        <div class="w-10 border-r-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd"
            />
          </svg>
        </div>
        <div class="px-5 border-r-2 w-1/5">
          <span>{{ loop.index }}</span>
        </div>
        <div class="px-5 border-r-2 w-1/6">
          <span>{{ row.nis }}</span>
        </div>
        <div class="px-5">
          <span>{{ row.nama }}</span>
        </div>
      </div>
      <div class="relative">
        <div id="row-rapor-{{ row.nis }}" class="h-0 overflow-hidden">
          <div class="h-64 w-full bg-white my-3 shadow-inner overflow-x-auto">
            <!-- Inside Container -->
            <div class="">
              <table class="table-auto">
                <tr class="bg-gray-300">
                  <th class="border-2 border-gray-400 bg-gray-400 px-3">
                    Semester
                  </th>
                  <th class="border-2 border-gray-400 px-3">Matematika</th>
                  <th class="border-2 border-gray-400 px-3">IPA</th>
                  <th class="border-2 border-gray-400 px-3">IPS</th>
                  <th class="border-2 border-gray-400 px-3">B Indonesia</th>
                  <th class="border-2 border-gray-400 px-3">B Inggris</th>
                  <th class="border-2 border-gray-400 px-3">Fisika</th>
                  <th class="border-2 border-gray-400 px-3">Kimia</th>
                  <th class="border-2 border-gray-400 px-3">Sejarah</th>
                </tr>
                {% for rowNilai in getNilai(row.nis) %}
                <tr>
                  <td class="border-2 border-gray-300 bg-gray-300 text-center">
                    Semester {{ rowNilai.semester }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.mtk or 0 }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.ipa or 0 }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.ips or 0 }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.bindo or 0 }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.bingg or 0 }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.fisika or 0 }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.kimia or 0 }}
                  </td>
                  <td class="border-2 border-gray-300 text-center">
                    {{ rowNilai.sejarah or 0 }}
                  </td>
                </tr>
                {% endfor %}
              </table>
            </div>
            <!-- End Container -->
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
<script>
  $(".row-rapor[data-row]").click(function () {
    $("#" + $(this).data("row")).toggleClass("h-0");
    $(this).toggleClass("bg-gray-100");
  });
</script>
{% endblock %}
